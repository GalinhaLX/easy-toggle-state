/*! easy-toggle-state v1.6.5 | (c) 2018 Matthieu Bu√© <https://twikito.com> | MIT License | https://twikito.github.io/easy-toggle-state/ */
!function(){"use strict";const t="toggle",e=e=>["data",t,e].filter(Boolean).join("-"),r=e("class"),i=e("escape"),o=e("event"),n=e("group"),s=e("is-active"),a=e("outside"),g=e("radio-group"),c=e("target"),l=e("target-all"),u=e("target-next"),A=e("target-only"),h=e("target-parent"),d=e("target-previous"),f=e("target-self"),b=e("state"),v=e("trigger-off"),E=(t,e)=>{const i=t?`[${t}]`:"";return e?[...e.querySelectorAll(i)]:[...document.querySelectorAll(`[${r}]${i}`.trim())]},m=(t,e)=>t.dispatchEvent(new Event(e)),T=(t,e={"aria-checked":t.isToggleActive,"aria-expanded":t.isToggleActive,"aria-hidden":!t.isToggleActive,"aria-selected":t.isToggleActive})=>Object.keys(e).forEach(r=>t.hasAttribute(r)&&t.setAttribute(r,e[r])),p=t=>{const e=t.hasAttribute(n)?n:g;return E(`${e}="${t.getAttribute(e)}"`).filter(t=>t.isToggleActive)},L=(t,e)=>{if(0===e.length)return console.warn(`There's no match for the selector '${t}' for this trigger`),e;const r=t.match(/#\w+/gi);return r&&r.forEach(t=>{const r=[...e].filter(e=>e.id===t.slice(1));r.length>1&&console.warn(`There's ${r.length} matches for the selector '${t}' for this trigger`)}),e},$=t=>{if(t.hasAttribute(c)||t.hasAttribute(l)){const e=t.getAttribute(c)||t.getAttribute(l);return L(e,document.querySelectorAll(e))}if(t.hasAttribute(h)){const e=t.getAttribute(h);return L(e,t.parentElement.querySelectorAll(e))}if(t.hasAttribute(f)){const e=t.getAttribute(f);return L(e,t.querySelectorAll(e))}return t.hasAttribute(d)?L("previous",[t.previousElementSibling].filter(Boolean)):t.hasAttribute(u)?L("next",[t.nextElementSibling].filter(Boolean)):[]},k=t=>{const e=t.target;e.closest("["+b+'="true"]')||(E(a).forEach(t=>{t!==e&&t.isToggleActive&&(t.hasAttribute(n)||t.hasAttribute(g)?B:S)(t)}),e.hasAttribute(a)&&e.isToggleActive&&document.addEventListener(e.getAttribute(o)||"click",k,!1))},w=t=>S(t.target.targetElement),y=(t,e)=>{t.isToggleActive=!t.isToggleActive,T(t),e.hasAttribute(a)&&t.setAttribute(b,e.isToggleActive);const r=E(v,t);if(0!==r.length)return e.isToggleActive?r.forEach(t=>{t.targetElement=e,t.addEventListener("click",w,!1)}):r.forEach(t=>{t.removeEventListener("click",w,!1)})},S=t=>{m(t,"toogleBefore");const e=t.getAttribute(r)||"is-active";t.isToggleActive=!t.isToggleActive,T(t),t.hasAttribute(A)||t.classList.toggle(e);const i=$(t);for(let r=0;r<i.length;r++)m(i[r],"toogleBefore"),i[r].classList.toggle(e),y(i[r],t),m(i[r],"toogleAfter");return m(t,"toogleAfter"),x(t)},x=t=>{if(t.hasAttribute(a))return t.hasAttribute(g)?console.warn(`You can't use '${a}' on a radio grouped trigger`):t.isToggleActive?document.addEventListener(t.getAttribute(o)||"click",k,!1):document.removeEventListener(t.getAttribute(o)||"click",k,!1)},B=t=>{const e=p(t);return 0===e.length?S(t):-1===e.indexOf(t)?(e.forEach(S),S(t)):-1===e.indexOf(t)||t.hasAttribute(g)?void 0:S(t)},q=t=>{m(t,"toogleBefore");const e=t.getAttribute(r)||"is-active";t.isToggleActive=!0,T(t,{"aria-checked":!0,"aria-expanded":!0,"aria-hidden":!1,"aria-selected":!0}),t.hasAttribute(A)||t.classList.contains(e)||t.classList.add(e);const i=$(t);for(let r=0;r<i.length;r++)m(i[r],"toogleBefore"),i[r].classList.contains(e)||i[r].classList.add(e),y(i[r],t),m(i[r],"toogleAfter");return m(t,"toogleAfter"),x(t)},O=()=>{if(0===E().length)return console.warn(`Easy Toggle State is not used: there's no trigger with '${r}' attribute to initialize.`);E(s).forEach(t=>(t.hasAttribute(n)||t.hasAttribute(g))&&p(t).length>0?console.warn(`Toggle group '${t.getAttribute(n)||t.getAttribute(g)}' must not have more than one trigger with '${s}'`):q(t)),E().forEach(t=>{t.addEventListener(t.getAttribute(o)||"click",e=>{e.preventDefault(),(t.hasAttribute(n)||t.hasAttribute(g)?B:S)(t)},!1)});const t=E(i);t.length>0&&document.addEventListener("keyup",e=>{"Escape"!==e.key&&"Esc"!==e.key||t.forEach(t=>{if(t.isToggleActive)return t.hasAttribute(g)?console.warn(`You can't use '${i}' on a radio grouped trigger`):(t.hasAttribute(n)?B:S)(t)})},!1)},D=()=>{O(),document.removeEventListener("DOMContentLoaded",D)};document.addEventListener("DOMContentLoaded",D),window.initEasyToggleState=O}();
