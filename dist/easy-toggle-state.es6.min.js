/*! easy-toggle-state v1.9.6 | (c) 2019 Matthieu Bu√© <https://twikito.com> | MIT License | https://twikito.github.io/easy-toggle-state/ */
!function(){"use strict";const t=document.documentElement.getAttribute("data-easy-toggle-state-custom-prefix")||"toggle",e=(e,r=(()=>t)())=>["data",r,e].filter(Boolean).join("-"),r=e("arrows"),i=e("class"),n=e("escape"),s=e("event"),o=e("group"),a=e("is-active"),c=e("outside"),g=e("radio-group"),u=e("target"),l=e("target-all"),A=e("target-next"),d=e("target-only"),h=e("target-parent"),b=e("target-previous"),f=e("target-self"),v=e("state"),E=e("trigger-off"),m=new Event("toggleAfter"),T=new Event("toggleBefore"),w=(t,e)=>{const r=t?`[${t}]`:"";return e?[...e.querySelectorAll(r)]:[...document.querySelectorAll(`[${i}]${r}`.trim())]},p=(t,e)=>t.dispatchEvent(e),L=(t,e={"aria-checked":t.isToggleActive,"aria-expanded":t.isToggleActive,"aria-hidden":!t.isToggleActive,"aria-selected":t.isToggleActive})=>Object.keys(e).forEach(r=>t.hasAttribute(r)&&t.setAttribute(r,e[r])),k=t=>{const e=t.hasAttribute(o)?o:g;return w(`${e}="${t.getAttribute(e)}"`).filter(t=>t.isToggleActive)},$=(t,e)=>{if(0===e.length)return console.warn(`There's no match for the selector '${t}' for this trigger`),[];const r=t.match(/#\w+/gi);return r&&r.forEach(t=>{const r=[...e].filter(e=>e.id===t.slice(1));r.length>1&&console.warn(`There's ${r.length} matches for the selector '${t}' for this trigger`)}),[...e]},S=t=>{const e=t.target;e.closest("["+v+'="true"]')||(w(c).forEach(t=>{t!==e&&t.isToggleActive&&(t.hasAttribute(o)||t.hasAttribute(g)?q:D)(t)}),e.hasAttribute(c)&&e.isToggleActive&&document.addEventListener(e.getAttribute(s)||"click",S,!1))},y=t=>D(t.currentTarget.targetElement),x=t=>{if(t.hasAttribute(c))return t.hasAttribute(g)?console.warn(`You can't use '${c}' on a radio grouped trigger`):t.isToggleActive?document.addEventListener(t.getAttribute(s)||"click",S,!1):document.removeEventListener(t.getAttribute(s)||"click",S,!1)},O=(t,e,r)=>(t=>{if(t.hasAttribute(u)||t.hasAttribute(l)){const e=t.getAttribute(u)||t.getAttribute(l);return $(e,document.querySelectorAll(e))}if(t.hasAttribute(h)){const e=t.getAttribute(h);return $(e,t.parentElement.querySelectorAll(e))}if(t.hasAttribute(f)){const e=t.getAttribute(f);return $(e,t.querySelectorAll(e))}return t.hasAttribute(b)?$("previous",[t.previousElementSibling].filter(Boolean)):t.hasAttribute(A)?$("next",[t.nextElementSibling].filter(Boolean)):[]})(t).forEach(i=>{p(i,T),i.isToggleActive=!i.isToggleActive,L(i),r&&!i.classList.contains(e)&&i.classList.add(e),r||i.classList.toggle(e),t.hasAttribute(c)&&i.setAttribute(v,t.isToggleActive),p(i,m),((t,e)=>{const r=w(E,t);if(0!==r.length)e.isToggleActive?r.forEach(t=>{t.targetElement=e,t.addEventListener("click",y,!1)}):r.forEach(t=>{t.removeEventListener("click",y,!1)})})(i,t)}),D=t=>{p(t,T);const e=t.getAttribute(i)||"is-active";return t.isToggleActive=!t.isToggleActive,L(t),t.hasAttribute(d)||t.classList.toggle(e),p(t,m),O(t,e,!1),x(t)},I=t=>{p(t,T);const e=t.getAttribute(i)||"is-active";return t.isToggleActive=!0,L(t,{"aria-checked":!0,"aria-expanded":!0,"aria-hidden":!1,"aria-selected":!0}),t.hasAttribute(d)||t.classList.contains(e)||t.classList.add(e),p(t,m),O(t,e,!0),x(t)},q=t=>{const e=k(t);return 0===e.length?D(t):-1===e.indexOf(t)?(e.forEach(D),D(t)):-1===e.indexOf(t)||t.hasAttribute(g)?void 0:D(t)},B=()=>{w(a).filter(t=>!t.isETSDefInit).forEach(t=>t.hasAttribute(o)||t.hasAttribute(g)?k(t).length>0?console.warn(`Toggle group '${t.getAttribute(o)||t.getAttribute(g)}' must not have more than one trigger with '${a}'`):(I(t),void(t.isETSDefInit=!0)):I(t));const t=w().filter(t=>!t.isETSInit);return t.forEach(t=>{t.addEventListener(t.getAttribute(s)||"click",e=>{e.preventDefault(),(t.hasAttribute(o)||t.hasAttribute(g)?q:D)(t)},!1),t.isETSInit=!0}),w(n).length>0&&!document.isETSEscInit&&(document.addEventListener("keydown",t=>{"Escape"!==t.key&&"Esc"!==t.key||w(n).forEach(t=>{if(t.isToggleActive)return t.hasAttribute(g)?console.warn(`You can't use '${n}' on a radio grouped trigger`):(t.hasAttribute(o)?q:D)(t)})},!1),document.isETSEscInit=!0),w(r).length>0&&!document.isETSArrInit&&(document.addEventListener("keydown",t=>{const e=document.activeElement;if(-1===["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End"].indexOf(t.key)||!e.hasAttribute(i)||!e.hasAttribute(r))return;if(!e.hasAttribute(o)&&!e.hasAttribute(g))return console.warn(`You can't use '${r}' on a trigger without '${o}' or '${g}'`);t.preventDefault();const n=e.hasAttribute(o)?w(`${o}='${e.getAttribute(o)}'`):w(`${g}='${e.getAttribute(g)}'`);let a=e;switch(t.key){case"ArrowUp":case"ArrowLeft":a=n.indexOf(e)>0?n[n.indexOf(e)-1]:n[n.length-1];break;case"ArrowDown":case"ArrowRight":a=n.indexOf(e)<n.length-1?n[n.indexOf(e)+1]:n[0];break;case"Home":a=n[0];break;case"End":a=n[n.length-1]}return a.focus(),a.dispatchEvent(new Event(a.getAttribute(s)||"click"))},!1),document.isETSArrInit=!0),t},Y=()=>{B(),document.removeEventListener("DOMContentLoaded",Y)};document.addEventListener("DOMContentLoaded",Y),window.initEasyToggleState=B}();
