/*! easy-toggle-state v1.12.7 | (c) 2020 Matthieu Bu√© <https://twikito.com> | MIT License | https://twikito.github.io/easy-toggle-state/ */
!function(){"use strict";const t=document.documentElement.getAttribute("data-easy-toggle-state-custom-prefix")||"toggle",e=(e,r=(()=>t)())=>["data",r,e].filter(Boolean).join("-"),r=e("arrows"),i="aria-checked",n=e("class"),o=e("escape"),s=e("event"),a="aria-expanded",c=e("group"),u="aria-hidden",g=e("is-active"),l=e("modal"),d=e("outside"),A=e("outside-event"),h="aria-pressed",b=e("radio-group"),f="aria-selected",v=e("target"),E=e("target-all"),m=e("target-next"),T=e("target-only"),p=e("target-parent"),w=e("target-previous"),y=e("target-self"),S=e("state"),L=e("trigger-off"),k=new Event("toggleAfter"),$=new Event("toggleBefore"),x=(t,e)=>{const r=t?`[${t}]`:"";return e?[...e.querySelectorAll(r)]:[...document.querySelectorAll(`[${n}]${r}`.trim())]},D=(t,e)=>t.dispatchEvent(e),O=(t,e={[i]:t.isToggleActive,[a]:t.isToggleActive,[u]:!t.isToggleActive,[h]:t.isToggleActive,[f]:t.isToggleActive})=>Object.keys(e).forEach(r=>t.hasAttribute(r)&&t.setAttribute(r,e[r])),I=t=>{const e=t.hasAttribute(c)?c:b;return x(`${e}="${t.getAttribute(e)}"`).filter(t=>t.isToggleActive)},q=(t,e)=>{if(0===e.length)return console.warn(`There's no match for the selector '${t}' for this trigger`),[];const r=t.match(/#\w+/gi);return r&&r.forEach(t=>{const r=[...e].filter(e=>e.id===t.slice(1));r.length>1&&console.warn(`There's ${r.length} matches for the selector '${t}' for this trigger`)}),[...e]},C=t=>document.addEventListener(t.getAttribute(A)||t.getAttribute(s)||"click",B,!1),B=t=>{const e=t.target,r=t.type;let i=!1;x(d).filter(t=>t.getAttribute(A)===r||t.getAttribute(s)===r&&!t.hasAttribute(A)||"click"===r&&!t.hasAttribute(s)&&!t.hasAttribute(A)).forEach(t=>{const r=e.closest("["+S+'="true"]');r&&r.easyToggleStateTrigger===t&&(i=!0),!i&&t!==e&&t.isToggleActive&&(t.hasAttribute(c)||t.hasAttribute(b)?R:K)(t)}),i||document.removeEventListener(r,B,!1),e.hasAttribute(d)&&e.isToggleActive&&C(e)},j=t=>K(t.currentTarget.targetElement),F=t=>{if(t.hasAttribute(d))return t.hasAttribute(b)?console.warn(`You can't use '${d}' on a radio grouped trigger`):t.isToggleActive?C(t):void 0},Y=t=>{const e=[...document.ETSFocusTrapContainer.querySelectorAll("a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]")];if(!e.length||"Tab"!==t.key)return;const r=t.target,i=e[0],n=e[e.length-1];return-1===e.indexOf(r)?(t.preventDefault(),i.focus()):t.shiftKey&&r===i?(t.preventDefault(),n.focus()):t.shiftKey||r!==n?void 0:(t.preventDefault(),i.focus())},H=(t,e,r)=>(t=>{if(t.hasAttribute(v)||t.hasAttribute(E)){const e=t.getAttribute(v)||t.getAttribute(E);return q(e,document.querySelectorAll(e))}if(t.hasAttribute(p)){const e=t.getAttribute(p);return q(e,t.parentElement.querySelectorAll(e))}if(t.hasAttribute(y)){const e=t.getAttribute(y);return q(e,t.querySelectorAll(e))}return t.hasAttribute(w)?q("previous",[t.previousElementSibling].filter(Boolean)):t.hasAttribute(m)?q("next",[t.nextElementSibling].filter(Boolean)):[]})(t).forEach(i=>{D(i,$),i.isToggleActive=!i.isToggleActive,O(i),r&&!i.classList.contains(e)&&i.classList.add(e),r||i.classList.toggle(e),t.hasAttribute(d)&&(i.setAttribute(S,t.isToggleActive),i.easyToggleStateTrigger=t),t.hasAttribute(l)&&(i.isToggleActive?(document.ETSFocusTrapContainer=i,document.addEventListener("keydown",Y,!1)):(document.ETSFocusTrapContainer=null,document.removeEventListener("keydown",Y,!1))),D(i,k),((t,e)=>{const r=x(L,t);if(0!==r.length)e.isToggleActive?r.forEach(t=>{t.targetElement=e,t.addEventListener("click",j,!1)}):(r.forEach(t=>{t.removeEventListener("click",j,!1)}),e.focus())})(i,t)}),K=t=>{D(t,$);const e=t.getAttribute(n)||"is-active";return t.isToggleActive=!t.isToggleActive,O(t),t.hasAttribute(T)||t.classList.toggle(e),D(t,k),H(t,e,!1),F(t)},M=t=>{D(t,$);const e=t.getAttribute(n)||"is-active";return t.isToggleActive=!0,O(t,{[i]:!0,[a]:!0,[u]:!1,[h]:!0,[f]:!0}),t.hasAttribute(T)||t.classList.contains(e)||t.classList.add(e),D(t,k),H(t,e,!0),F(t)},R=t=>{const e=I(t);return 0===e.length?K(t):-1===e.indexOf(t)?(e.forEach(K),K(t)):-1===e.indexOf(t)||t.hasAttribute(b)?void 0:K(t)},U=()=>{x(g).filter(t=>!t.isETSDefInit).forEach(t=>t.hasAttribute(c)||t.hasAttribute(b)?I(t).length>0?console.warn(`Toggle group '${t.getAttribute(c)||t.getAttribute(b)}' must not have more than one trigger with '${g}'`):(M(t),void(t.isETSDefInit=!0)):M(t));const t=x().filter(t=>!t.isETSInit);return t.forEach(t=>{t.addEventListener(t.getAttribute(s)||"click",e=>{e.preventDefault(),(t.hasAttribute(c)||t.hasAttribute(b)?R:K)(t)},!1),t.isETSInit=!0}),x(o).length>0&&!document.isETSEscInit&&(document.addEventListener("keydown",t=>{"Escape"!==t.key&&"Esc"!==t.key||x(o).forEach(t=>{if(t.isToggleActive)return t.hasAttribute(b)?console.warn(`You can't use '${o}' on a radio grouped trigger`):(t.hasAttribute(c)?R:K)(t)})},!1),document.isETSEscInit=!0),x(r).length>0&&!document.isETSArrInit&&(document.addEventListener("keydown",t=>{const e=document.activeElement;if(-1===["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End"].indexOf(t.key)||!e.hasAttribute(n)||!e.hasAttribute(r))return;if(!e.hasAttribute(c)&&!e.hasAttribute(b))return console.warn(`You can't use '${r}' on a trigger without '${c}' or '${b}'`);t.preventDefault();const i=e.hasAttribute(c)?x(`${c}='${e.getAttribute(c)}'`):x(`${b}='${e.getAttribute(b)}'`);let o=e;switch(t.key){case"ArrowUp":case"ArrowLeft":o=i.indexOf(e)>0?i[i.indexOf(e)-1]:i[i.length-1];break;case"ArrowDown":case"ArrowRight":o=i.indexOf(e)<i.length-1?i[i.indexOf(e)+1]:i[0];break;case"Home":o=i[0];break;case"End":o=i[i.length-1]}return o.focus(),o.dispatchEvent(new Event(o.getAttribute(s)||"click"))},!1),document.isETSArrInit=!0),t},z=()=>{U(),document.removeEventListener("DOMContentLoaded",z)};document.addEventListener("DOMContentLoaded",z),window.initEasyToggleState=U}();
