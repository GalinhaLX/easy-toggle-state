/*! easy-toggle-state v1.12.7 | (c) 2020 Matthieu Bu√© <https://twikito.com> | MIT License | https://twikito.github.io/easy-toggle-state/ */
!function(){"use strict";function t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var n=document.documentElement.getAttribute("data-easy-toggle-state-custom-prefix")||"toggle",i=function(){return n},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i();return["data",e,t].filter(Boolean).join("-")},a=o("arrows"),c="aria-checked",u=o("class"),s=o("escape"),l=o("event"),g="aria-expanded",f=o("group"),d="aria-hidden",A=o("is-active"),h=o("modal"),v=o("outside"),b=o("outside-event"),m="aria-pressed",E=o("radio-group"),T="aria-selected",p=o("target"),y=o("target-all"),w=o("target-next"),S=o("target-only"),L=o("target-parent"),k=o("target-previous"),x=o("target-self"),O=o("state"),D=o("trigger-off"),I=new Event("toggleAfter"),j=new Event("toggleBefore"),q=function(t,r){var n=t?"[".concat(t,"]"):"";return e(r?r.querySelectorAll(n):document.querySelectorAll("[".concat(u,"]").concat(n).trim()))},C=function(t,e){return t.dispatchEvent(e)},B=function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t(r={},c,e.isToggleActive),t(r,g,e.isToggleActive),t(r,d,!e.isToggleActive),t(r,m,e.isToggleActive),t(r,T,e.isToggleActive),r);return Object.keys(n).forEach((function(t){return e.hasAttribute(t)&&e.setAttribute(t,n[t])}))},F=function(t){var e=t.hasAttribute(f)?f:E;return q("".concat(e,'="').concat(t.getAttribute(e),'"')).filter((function(t){return t.isToggleActive}))},M=function(t,r){if(0===r.length)return console.warn("There's no match for the selector '".concat(t,"' for this trigger")),[];var n=t.match(/#\w+/gi);return n&&n.forEach((function(t){var n=e(r).filter((function(e){return e.id===t.slice(1)}));n.length>1&&console.warn("There's ".concat(n.length," matches for the selector '").concat(t,"' for this trigger"))})),e(r)},U=function(t){return document.addEventListener(t.getAttribute(b)||t.getAttribute(l)||"click",Y,!1)},Y=function t(e){var r=e.target,n=e.type,i=!1;q(v).filter((function(t){return t.getAttribute(b)===n||t.getAttribute(l)===n&&!t.hasAttribute(b)||"click"===n&&!t.hasAttribute(l)&&!t.hasAttribute(b)})).forEach((function(t){var e=r.closest("["+O+'="true"]');e&&e.easyToggleStateTrigger===t&&(i=!0),!i&&t!==r&&t.isToggleActive&&(t.hasAttribute(f)||t.hasAttribute(E)?G:$)(t)})),i||document.removeEventListener(n,t,!1),r.hasAttribute(v)&&r.isToggleActive&&U(r)},H=function(t){return $(t.currentTarget.targetElement)},K=function(t){if(t.hasAttribute(v))return t.hasAttribute(E)?console.warn("You can't use '".concat(v,"' on a radio grouped trigger")):t.isToggleActive?U(t):void 0},R=function(t){var r=e(document.ETSFocusTrapContainer.querySelectorAll("a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]"));if(r.length&&"Tab"===t.key){var n=t.target,i=r[0],o=r[r.length-1];return-1===r.indexOf(n)?(t.preventDefault(),i.focus()):t.shiftKey&&n===i?(t.preventDefault(),o.focus()):t.shiftKey||n!==o?void 0:(t.preventDefault(),i.focus())}},P=function(t,e,r){return function(t){if(t.hasAttribute(p)||t.hasAttribute(y)){var e=t.getAttribute(p)||t.getAttribute(y);return M(e,document.querySelectorAll(e))}if(t.hasAttribute(L)){var r=t.getAttribute(L);return M(r,t.parentElement.querySelectorAll(r))}if(t.hasAttribute(x)){var n=t.getAttribute(x);return M(n,t.querySelectorAll(n))}return t.hasAttribute(k)?M("previous",[t.previousElementSibling].filter(Boolean)):t.hasAttribute(w)?M("next",[t.nextElementSibling].filter(Boolean)):[]}(t).forEach((function(n){C(n,j),n.isToggleActive=!n.isToggleActive,B(n),r&&!n.classList.contains(e)&&n.classList.add(e),r||n.classList.toggle(e),t.hasAttribute(v)&&(n.setAttribute(O,t.isToggleActive),n.easyToggleStateTrigger=t),t.hasAttribute(h)&&(n.isToggleActive?(document.ETSFocusTrapContainer=n,document.addEventListener("keydown",R,!1)):(document.ETSFocusTrapContainer=null,document.removeEventListener("keydown",R,!1))),C(n,I),function(t,e){var r=q(D,t);if(0!==r.length)e.isToggleActive?r.forEach((function(t){t.targetElement=e,t.addEventListener("click",H,!1)})):(r.forEach((function(t){t.removeEventListener("click",H,!1)})),e.focus())}(n,t)}))},$=function(t){C(t,j);var e=t.getAttribute(u)||"is-active";return t.isToggleActive=!t.isToggleActive,B(t),t.hasAttribute(S)||t.classList.toggle(e),C(t,I),P(t,e,!1),K(t)},z=function(e){var r;C(e,j);var n=e.getAttribute(u)||"is-active";return e.isToggleActive=!0,B(e,(t(r={},c,!0),t(r,g,!0),t(r,d,!1),t(r,m,!0),t(r,T,!0),r)),e.hasAttribute(S)||e.classList.contains(n)||e.classList.add(n),C(e,I),P(e,n,!0),K(e)},G=function(t){var e=F(t);return 0===e.length?$(t):-1===e.indexOf(t)?(e.forEach($),$(t)):-1===e.indexOf(t)||t.hasAttribute(E)?void 0:$(t)},J=function(){q(A).filter((function(t){return!t.isETSDefInit})).forEach((function(t){return t.hasAttribute(f)||t.hasAttribute(E)?F(t).length>0?console.warn("Toggle group '".concat(t.getAttribute(f)||t.getAttribute(E),"' must not have more than one trigger with '").concat(A,"'")):(z(t),void(t.isETSDefInit=!0)):z(t)}));var t=q().filter((function(t){return!t.isETSInit}));return t.forEach((function(t){t.addEventListener(t.getAttribute(l)||"click",(function(e){e.preventDefault(),(t.hasAttribute(f)||t.hasAttribute(E)?G:$)(t)}),!1),t.isETSInit=!0})),q(s).length>0&&!document.isETSEscInit&&(document.addEventListener("keydown",(function(t){"Escape"!==t.key&&"Esc"!==t.key||q(s).forEach((function(t){if(t.isToggleActive)return t.hasAttribute(E)?console.warn("You can't use '".concat(s,"' on a radio grouped trigger")):(t.hasAttribute(f)?G:$)(t)}))}),!1),document.isETSEscInit=!0),q(a).length>0&&!document.isETSArrInit&&(document.addEventListener("keydown",(function(t){var e=document.activeElement;if(-1!==["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End"].indexOf(t.key)&&e.hasAttribute(u)&&e.hasAttribute(a)){if(!e.hasAttribute(f)&&!e.hasAttribute(E))return console.warn("You can't use '".concat(a,"' on a trigger without '").concat(f,"' or '").concat(E,"'"));t.preventDefault();var r=e.hasAttribute(f)?q("".concat(f,"='").concat(e.getAttribute(f),"'")):q("".concat(E,"='").concat(e.getAttribute(E),"'")),n=e;switch(t.key){case"ArrowUp":case"ArrowLeft":n=r.indexOf(e)>0?r[r.indexOf(e)-1]:r[r.length-1];break;case"ArrowDown":case"ArrowRight":n=r.indexOf(e)<r.length-1?r[r.indexOf(e)+1]:r[0];break;case"Home":n=r[0];break;case"End":n=r[r.length-1]}return n.focus(),n.dispatchEvent(new Event(n.getAttribute(l)||"click"))}}),!1),document.isETSArrInit=!0),t};document.addEventListener("DOMContentLoaded",(function t(){J(),document.removeEventListener("DOMContentLoaded",t)})),window.initEasyToggleState=J}();
